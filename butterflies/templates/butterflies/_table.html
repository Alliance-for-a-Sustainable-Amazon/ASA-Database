{# _table.html - Reusable table and search row for any model #}
{% load butterfly_extras %}
<table border="1">
    <tr>
        {% for field in fields %}
            <th>{{ field.verbose_name }}</th>
        {% endfor %}
    </tr>
    <tr>
        <form method="get">
        {% for field in fields %}
            <td>
                <input type="text" name="{{ field.name }}" value="{{ request.GET|get_item:field.name }}" placeholder="Search {{ field.verbose_name }}">
            </td>
        {% endfor %}
        <td>
            <button type="submit">Search</button>
        </td>
        </form>
    </tr>
    {% for obj in objects %}
    <tr>
        {% for field in fields %}
            {% if forloop.first %}
                <td><a href="{% url 'dynamic_detail' obj.model_name_internal obj.pk %}">{{ obj|get_field_value:field.name }}</a></td>
            {% else %}
                <td>{{ obj|get_field_value:field.name }}</td>
            {% endif %}
        {% endfor %}
        <td>
            <a href="{% url 'dynamic_edit' obj.model_name_internal obj.pk %}">Edit</a> |
            <a href="{% url 'dynamic_delete' obj.model_name_internal obj.pk %}">Delete</a>
        </td>
    </tr>
    {% empty %}
    <tr><td colspan="{{ fields|length }}">No records found.</td></tr>
    {% endfor %}
</table>
